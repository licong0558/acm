# 单调队列

## 性质 <a id="xing-zhi"></a>

在队列尾端的操作与在单调栈栈顶操作相同，使破坏单调性的元素出栈。

同时队列的首段也可以进行插入删除。

## 用途 <a id="yong-tu"></a>

### 维护窗口最大值 <a id="wei-hu-chuang-kou-zui-da-zhi"></a>

现有需要维护最大值的队列 `Q`，和辅助队列 `M`，设计算法使任何时刻时 `M` 队首元素都是当前 `Q` 的最大值。

使用递减的单调队列，每次在 `Q` 的队尾加入元素 `x` 时，也将其加入到 `M` 中，从 `M` 的队尾向前遍历，将遍历到的所有 **小于等** **`x`** **的元素**全部删除，因为它们在 `x` 之前被加入到队列中，在 `x` 出队前它们就已经都出队了，即**在** **`x`** **出队前这些元素不可能成为队列中的最大值**。

每次在 `Q` 的队首删除元素时，将要删除的元素与 `M` 的队首元素比较，如果该元素与 `M` 队首元素相等，即**该元素为执行删除操作前队列的最大值**，则同时也要将 `M` 的队首元素删除，使原 `Q` 的次小值成为 `M` 的队首元素，保证 `M` 的队首元素是删除操作后 `Q` 中最大的元素。[  
](https://licong0558.gitbook.io/acm/~/drafts/-LIfAxifZD_Tr1HFwfRk/primary/dan-tiao-zhan)

