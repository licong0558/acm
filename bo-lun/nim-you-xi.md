# Nim游戏

## 结论 \(Bouton's Theorem\)

定义$$P$$ 代表必败态 ，$$N$$ 代表必胜态

对于一个 $$Nim$$ 游戏的局面 $$(a1,a2,...,an)$$ ，它是 $$P−position$$ 当且仅当 $$a1$$^ $$a2$$ ^...^ $$an=0$$ ，其中^表示异或\(xor\)运算。

## 证明

由定义得

* 无法进行任何移动的局面是 $$P−position$$ 
* 可以移动到P−position的局面是 $$N−position$$ 
* 所有移动都导致 $$N−position$$ 的局面是 $$P−position$$ 

根据定义，证明一种判断 $$position$$ 的性质的方法的正确性，只需证明三个命题： 1、这个判断将所有 $$terminal-position$$ 判为 $$P-position$$ ；2、根据这个判断被判为 $$N-position$$ 的局面一定可以移动到某个 $$P-position$$ ；3、根据这个判断被判为 $$P-position$$ 的局面无法移动到某个 $$P-position$$ 。

* 第一个命题显然， $$terminal-position$$ 只有一个，就是全0，异或仍然是0。
* 第二个命题，对于某个局面 $$(a1,a2,...,an)$$ ，若 $$a_1\oplus a_2...\oplus a_n!=0$$ ，一定存在某个合法的移动，将ai改变成ai'后满足a1^a2^...^ai'^...^an=0。不妨设a1^a2^...^an=k，则一定存在某个ai，它的二进制表示在k的最高位上是1（否则k的最高位那个1是怎么得到的）。这时ai^k&lt;ai一定成立。则我们可以将ai改变成ai'=ai^k，此时a1^a2^...^ai'^...^an=a1^a2^...^an^k=0。
* 第三个命题，对于某个局面\(a1,a2,...,an\)，若a1^a2^...^an=0，一定不存在某个合法的移动，将ai改变成ai'后满足a1^a2^...^ai'^...^an=0。因为异或运算满足消去率，由a1^a2^...^an=a1^a2^...^ai'^...^an可以得到ai=ai'。所以将ai改变成ai'不是一个合法的移动。证毕。



